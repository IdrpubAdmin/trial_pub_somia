<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const h1 = document.createElement('h1')
        h1.textContent = '할 일 목록'
        document.body.appendChild(h1)

        const input = document.createElement('input')
        // input.addEventListener('keyup', () => {
        //     // input의 value가 비어있지 않은 경우에만 -> 뭐가 있을 때 : 그리고 p 태그가 존재할때 or 이벤트 실행 안함(오류해결해야댐)
        //     if (input.value !== '') {
        //         h1.removeChild(p)
        //     }
        // })
        document.body.appendChild(input)

        const addButton = document.createElement('button')
        addButton.textContent = '추가하기'
        document.body.appendChild(addButton)

        const p = document.createElement('p')

        const allCheck = document.createElement('button')
        allCheck.textContent = '전부체크'
        document.body.appendChild(allCheck)

        addButton.addEventListener('click', () => {

            
            //************** 체크박스 : input의 value가 비어있지 않은 경우에만 -> 뭐가 있을 때
            if (input.value !== '') {
                const div = document.createElement('div')
                document.body.appendChild(div)

                const checkbox = document.createElement('input')
                // input 타입을 checkbox로 지정
                checkbox.type = 'checkbox'
                checkbox.value = 'list'
                checkbox.addEventListener('change', () => {
                    if (checkbox.checked) {
                        div.style.textDecoration = 'line-through'
                    } else {
                        div.style.textDecoration = ''
                    }
                })
                div.appendChild(checkbox)

                const span = document.createElement('span')
                // input의 값을 span에 집어넣음
                span.textContent = input.value
                // input.value의 활용이 끝난 시점에 빈 문자열로 변경
                input.value = ''
                // div에 span을 집어넣음
                div.appendChild(span)

                // ************** 제거하기 버튼
                const deleteButton = document.createElement('button')
                deleteButton.textContent = '제거하기'
                deleteButton.addEventListener('click', () => {
                    div.parentNode.removeChild(div)
                })
                div.appendChild(deleteButton)

                // **************전부체크 버튼 : 오류 -> 해제가 안됨
                allCheck.addEventListener('click', () => {
                    const checkboxes = document.querySelectorAll('input[type=checkbox]')
                    
                    for (let i = 0; i < checkboxes.length; i++) {
                        if (checkboxes[i].checked = true ) {
                            checkboxes[i].checked = true
                            div.style.textDecoration = 'line-through'
                        } else {
                            checkboxes[i].checked = false
                            div.style.textDecoration = ''
                        }
                    }
                })

            } else {
                // 뭐가 없을때 : 한번에 적기?
                p.style.color = 'red'
                p.style.fontSize = '12px'
                p.textContent = '내용을 입력하세요'
                h1.appendChild(p)
            }
        })

    })
</script>
<body>

</body>
</html>